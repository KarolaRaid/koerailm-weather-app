{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koerailm</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body>
<div class="container">
    <header>
        <img id="ai-seasonal-dog" src="https://i.imghippo.com/files/0TmWx1728769205.png"
             alt="AI generated seasonal dog image">

        <div class="title-subtitle-container">
            <span id="main-title">KOERAILM</span>
            <div id="subtitle">
                koera|ilm<br>
                halb, ebameeldiv, harilikult sajune ilm<br>
                <div class="italic">
                    Sadas lörtsi: tõeline koerailm.<br>
                    Väljas oli kõva tuul ja sadas: säärase koerailmaga ei tahtnud keegi õue minna.
                </div>
            </div>
        </div>
    </header>

    <div class="content">
        <form method="GET" action={% url 'current_weather' %}>
            <input id="location-search" class="box" type="text" name="location_search" placeholder="Sisesta asukoht..."
                   required>
            <span><button type="submit" class="button box">Otsi</button></span>
            <span><button class="button box" onclick="user_location()">Sinu asukoht</button></span>
        </form>

        {% if error %}
            <div id="error-message" class="box" style="color:red;">
                <strong>{{ error }}</strong>
            </div>
        {% else %}

            <div id="current-weather" class="box">
                <h3>Asukoht: {{ location }}, {{ country }}</h3>
                <img src="{{ icon }}" alt="current weather icon"><br>
                <h4>{{ condition_text }}</h4>
                Temperatuur: {{ temperature }}°C, tundub nagu: {{ temperature_feelslike }}°C<br>
                Niiskustase: {{ humidity }}%, sademed: {{ precipitation }} mm/h<br>
                Tuule kiirus {{ wind_kmh }} km/h ehk {{ wind_ms }} m/s, suund: {{ wind_direction }}<br>
                Pilvisus: {{ cloud }}%<br>

            </div>



            <div id="dog-weather-index" class="box">
                Koerailmaindeks:<br>
                <div id="paws">
                    {% for i in "01234" %}
                        {% if forloop.counter0 < dog_rating %}
                            <img id="dog-paw" src="https://i.imghippo.com/files/Rds5k1728770794.png" alt="dog rating full">
                        {% else %}
                            <img id="dog-paw" src="https://i.imghippo.com/files/RKTdZ1728769730.png" alt="dog rating zero">
                        {% endif %}
                    {% endfor %}
                </div>
            </div>



            <div id="folk-saying" class="box italic">
                {% if current_folk_saying %}
                    <div class="folk-saying">
                        <p>{{ current_folk_saying.text }}</p>
                    </div>
                {% else %}
                    <p>No folk saying for this month.</p>
                {% endif %}

            </div>

            <div id="hourly-forecast" class="box">
                <h4>Hourly Forecast</h4>
                <div id="hourly-forecast-elements">
                    {% for weather in hourly_weather_data %}
                        <div class="hourly-forecast-data">
                        <img src="{{ weather.h_icon }}" alt="hourly forecast icon"><br>
                        {{ weather.h_hour }}<br>
                        {{ weather.h_temperature }}°C<br>
                        Humidity: {{ weather.h_humidity }}%<br>
                        <br>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
</div>

<script src="{% static 'js/scripts.js' %}"></script>
</body>
</html>